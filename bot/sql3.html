<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
    <title>Bot 4</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    
</head>
<body>
    <p style="margin-bottom: 3em"></p>
    <div class="container h-100">
		<div class="row">
			<div class="col-md-8 offset-md-1">
                <h1>Введение в базы данных и SQL. Часть 2</h1>
                <br>
                На позапрошлом занятии мы начали учиться создавать базы данных, но мы говорили, что эти базы данных являются простыми. Сегодня мы будем разговаривать о более сложных базах данных, которые называются реляционными базами данных
                <br>
                <br>
                Зачем нужно что-то придумывать, если и так работает? Посмотрите на картинку ниже, если обратить внимание на выделенные области, можно заметить, что некоторые данные в таблице повторяются, так у водителя Иры есть две машины и ее имя и номер прав присутствуют дважды, то же c машиной Toyota
                <br>
                <img src="img/image12.png" width="500px" height="auto">
                <br>
                <br>
                В такой ситуации и нужны реляционные базы данных, вместо того, чтобы записывать всю информацию в одну таблицу и тем самым дублировать информацию, мы можем разделить всю информацию между несколькими таблицами. Для этого примера это будет три таблицы владельцы, машины и модели
                <br>
                <br>
                <img src="img/image13.png" width="500px" height="auto">
                <br>
                <br>
                Мы можем заметить, что в этих таблицах вместо дублирования информации мы даем подобие ссылки на запись в другой таблице с помощью id_owner и id_model. Такие поля-ссылки, которые ссылаются на записи в другой таблице называются внешними ключами или foreign keys. Они обозначаются после объявления всех полей.
                <br>
                <br>
                <a href="https://sqliteonline.com/">ссылка на редактор</a>
                <h6>Задание 1. С помощью онлайн редактора SQL, создайте таблицу owners из примера выше </h6>
                 она будет содержать три поля (id, owner, driver_card)
                 <br>
                 <br>
                 <h6>Далее создайте таблицу models из примера выше </h6>
                 она будет содержать четыре поля (id, mark, model, prod_country)
                 <br>
                 <br>
                 <h6>И наконец создайте таблицу cars</h6>
                 она содрежит пять полей (id, number, color, id_owner, id_model)
                 <br>
                 <br>
                 Также нам нужно добавить два внешних ключа для полей id_owner и id_model, с помощью синтаксиса: <br>
                 <code> FOREIGN KEY (имя_столбца_в_текущей_таблице) REFERNCES имя_таблицы (имя_столбца)</code>
                 <br>
                 Имя_стобца - это имя столбца в таблице, на которую мы ссылемся 
                 <br>
                 Этот код пишем сразу после объявления столбцов в блоке CREATE
                 <br>

                 <h6>Задание 2. Наполните таблицу значениями как на рисунке выше</h6>
                 Обратите внимание, что таблицу cars мы будем заполнять в последнюю очередь, потому что она содержит ссылки (внешние ключи) на значения в других таблицах
                 <br>
                 <h6>Задание 3. С помощью select проверьте, что все получилось</h6>
                 <h6>Задание 4. Добавьте новые записи в наши таблицы, ориентируясь на рисунок ниже</h6>
                 Нужно понять, какие значения мы должны добавить и в какие таблицы
                 <br>
                 <br>
                 <img src="img/image14.png" width="500px" height="auto">
                 <br>
                 <br>
                 Теперь, когда наши данные расположены в разных таблицах, мы можем объединять их обратно по внешнему ключю в запросе SELECT. 
                 Для этого в уже знакомом нам запросе select прописываем, что мы берем все данные из всех трех таблиц, перечисляя их через запятую. И добавляя в запрос WHERE, который обозначает где объединять таблицы после которого мы прописываем способ объединения.
                 <br>
                 Пример кода, попробуйте его выполнить в редакторе:<br>

                 <code>
                    SELECT cars.number, cars.color, owners.owner, models.mark FROM cars, owners, models

WHERE cars.id_owner=owners.id and cars.id_model=models.id
                 </code>
                 <br>
                 <br>
                 <h6>Задание 5. Выведите таблицу, в которой содержатся имя владельца, номер и модель машины </h6>
                Введите запрос в поле ниже:
                <textarea  class="form-control" rows="1"></textarea>
                <br>
                Используя Where мы также можем запрашивать конкретные для нас данные, например если владелец машины Виктор. Данный запрос к БД выдаст нам только записи с владельцем Виктор:
                <br>
                <code>
                    SELECT cars.number,cars.color,owners.owner,models.mark

FROM cars, owners, models

WHERE cars.id_owner-owners.id and cars.id_model-models.id and owners.owner =

"Виктор"
                </code>
                <br>
                <br>
                <h6>Задание 6. Сделать запрос из предыдущего задания, который выдает все машины с маркой Chevrolet</h6>
                Введите запрос в поле ниже:
                <textarea  class="form-control" rows="1"></textarea>
                <br>

            </div>
        </div>
    </div>
    <script> var name = 'qList4'; </script>
    <script src="script.js"></script>
</body>
</html>
